import{r as o,j as e}from"./index-4wnQrRtG.js";const w=()=>{const[l,i]=o.useState([]),[c,u]=o.useState("all"),[t,p]=o.useState(null),[x,g]=o.useState("");o.useEffect(()=>{const s=JSON.parse(localStorage.getItem("wellnessDiscrepancies")||"[]");i(s.sort((r,d)=>new Date(d.createdAt)-new Date(r.createdAt)))},[]);const h={payment_not_received:"ðŸ’³ Payment Not Received",duplicate_charge:"ðŸ“Œ Duplicate Charge",wrong_amount:"ðŸ”¢ Wrong Amount Charged",subscription_issue:"â° Subscription Not Activated",other:"â“ Other Issue"},N={open:"bg-red-100 text-red-800 border-red-400",in_progress:"bg-yellow-100 text-yellow-800 border-yellow-400",resolved:"bg-green-100 text-green-800 border-green-400"},m=c==="all"?l:l.filter(s=>s.status===c),j=(s,r)=>{const d=l.map(a=>a.id===s?{...a,status:r}:a);i(d),localStorage.setItem("wellnessDiscrepancies",JSON.stringify(d)),t?.id===s&&p({...t,status:r})},y=s=>{if(!x.trim()){alert("Please enter a response message");return}const r=l.map(a=>{if(a.id===s){const f={date:new Date().toISOString(),message:x,respondedBy:"Admin"};return{...a,response:[...a.response||[],f]}}return a});i(r),localStorage.setItem("wellnessDiscrepancies",JSON.stringify(r));const d=r.find(a=>a.id===s);p(d),g(""),alert("âœ… Response sent to user!")},b=s=>N[s]||"bg-gray-100 text-gray-800",n={open:l.filter(s=>s.status==="open").length,in_progress:l.filter(s=>s.status==="in_progress").length,resolved:l.filter(s=>s.status==="resolved").length,total:l.length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"ðŸ”§ Admin Discrepancy Dashboard"}),e.jsx("p",{className:"text-purple-100",children:"Manage user payment discrepancies and complaints"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-red-500",children:[e.jsx("p",{className:"text-gray-600 text-sm uppercase font-semibold",children:"Open Issues"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:n.open})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-yellow-500",children:[e.jsx("p",{className:"text-gray-600 text-sm uppercase font-semibold",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:n.in_progress})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-green-500",children:[e.jsx("p",{className:"text-gray-600 text-sm uppercase font-semibold",children:"Resolved"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:n.resolved})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-blue-500",children:[e.jsx("p",{className:"text-gray-600 text-sm uppercase font-semibold",children:"Total"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:n.total})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","open","in_progress","resolved"].map(s=>e.jsxs("button",{onClick:()=>u(s),className:`px-4 py-2 rounded-lg font-semibold transition ${c===s?"bg-purple-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:border-purple-400"}`,children:[s==="all"&&`All (${n.total})`,s==="open"&&`Open (${n.open})`,s==="in_progress"&&`In Progress (${n.in_progress})`,s==="resolved"&&`Resolved (${n.resolved})`]},s))}),m.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âœ…"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No Discrepancies"}),e.jsx("p",{className:"text-gray-600",children:"All payment discrepancies have been resolved!"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["Discrepancies (",m.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:m.map(s=>e.jsxs("div",{onClick:()=>p(s),className:`p-3 rounded-lg cursor-pointer transition border-l-4 ${t?.id===s.id?"bg-purple-50 border-purple-500 shadow-md":"bg-white border-gray-300 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${b(s.status)}`,children:s.status.toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:s.userName}),e.jsx("p",{className:"text-xs text-gray-600",children:h[s.issueType]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.description.substring(0,50),"..."]})]},s.id))})]}),e.jsx("div",{className:"lg:col-span-2",children:t?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-t-4 border-purple-600",children:[e.jsxs("div",{className:"mb-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Discrepancy Details"}),e.jsx("span",{className:`text-sm font-bold px-3 py-1 rounded ${b(t.status)}`,children:t.status.toUpperCase()})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("span",{className:"font-semibold",children:"User:"})," ",t.userName]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",t.userEmail]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Reported:"})," ",new Date(t.createdAt).toLocaleString()]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 uppercase mb-2",children:"Issue Type"}),e.jsx("p",{className:"text-lg text-gray-800",children:h[t.issueType]})]}),t.amount&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 uppercase mb-2",children:"Amount"}),e.jsxs("p",{className:"text-lg text-red-600 font-bold",children:["â‚¹",t.amount]})]}),t.paymentId&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 uppercase mb-2",children:"Payment ID"}),e.jsx("p",{className:"text-sm font-mono text-gray-800 break-all",children:t.paymentId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 uppercase mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-800 bg-gray-50 p-3 rounded",children:t.description})]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Change Status"}),e.jsx("div",{className:"flex gap-2",children:["open","in_progress","resolved"].map(s=>e.jsxs("button",{onClick:()=>j(t.id,s),className:`px-3 py-1 rounded text-sm font-semibold transition ${t.status===s?"bg-purple-600 text-white":"bg-white border border-gray-300 hover:border-purple-400"}`,children:[s==="open"&&"ðŸ”´ Open",s==="in_progress"&&"ðŸŸ¡ In Progress",s==="resolved"&&"ðŸŸ¢ Resolved"]},s))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 uppercase mb-3",children:"Communication"}),e.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto bg-gray-50 p-3 rounded-lg",children:t.response&&t.response.length>0?t.response.map((s,r)=>e.jsxs("div",{className:"bg-white p-3 rounded border-l-4 border-green-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-green-700",children:"Admin Response"}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.date).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-gray-800",children:s.message})]},r)):e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No responses yet"})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 uppercase mb-3",children:"Send Response to User"}),e.jsx("textarea",{value:x,onChange:s=>g(s.target.value),placeholder:"Type your response message here...",rows:"3",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-purple-500 mb-3"}),e.jsx("button",{onClick:()=>y(t.id),className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 rounded-lg transition",children:"ðŸ“¤ Send Response & Notify User"})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ‘†"}),e.jsx("p",{className:"text-gray-600",children:"Select a discrepancy from the list to view details and respond"})]})})]})]})};export{w as default};
